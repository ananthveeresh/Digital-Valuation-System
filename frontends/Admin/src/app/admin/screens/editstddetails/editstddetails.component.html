<main id="main" class="main">
    <section class="section dashboard">
        <div class="row">
            <div class="card">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="card-title">{{ selectedStdInfo?.studentname }}'s <span class="card-title text-danger">INFO</span></h5>
                <div class="col-md-0">
                 <div class="flex">
                  <!-- <button class="btn btn-primary btn-sm me-2" (click)="Edit()">Edit </button> -->
                  <button class="btn btn-primary btn-sm" (click)="back()">Back </button>
                 </div>
                </div>
               
              </div>
              <!-- Basic Information Section -->
              <div class="p-4 mb-4">
                <h6 class="carda-title text-primary mb-3">
                  <i class="bi bi-info-circle-fill"></i> Student Information
                </h6>
                <hr  />
                <div class="row g-3">
                  <div class="col-lg-4">
                    <label class="form-label fw-bold">Course</label>
                    
                    <input type="text" id="full_course_name" class="form-control" value="{{selectedStdInfo?.course?.[0]?.full_course_name}}"
                    [(ngModel)]="selectedStdInfo.course?.[0].full_course_name" name="selectedStdInfo?.course?.[0]?.full_course_name" readonly>
                  </div>
                  <div class="col-lg-4">
                    <label class="form-label fw-bold">Second Language</label>
                    <input type="text" id="language" class="form-control" value="{{selectedStdInfo?.language}}" [(ngModel)]="selectedStdInfo.language" name="selectedStdInfo.language">
                  </div>
                    
                  <div class="col-lg-4">
                    <label class="form-label fw-bold">SUC Number</label>
                    <input type="text" id="suc" class="form-control" value="{{selectedStdInfo?.suc}}" [(ngModel)]="selectedStdInfo.suc" name="selectedStdInfo.suc">
                    <!-- <p>{{ selectedStdInfo?.suc }}</p> -->
                  </div>
                  <div class="col-lg-4">
                    <label class="form-label fw-bold">Name of the Student</label>
                    <input type="text" id="studentName" class="form-control" value="{{selectedStdInfo?.studentname}}" [(ngModel)]="selectedStdInfo.studentname" name="selectedStdInfo.studentName">
                    <!-- <p>{{ selectedStdInfo?.studentname }}</p> -->
                  </div>
                  <div class="col-lg-4">
                    <label class="form-label fw-bold">Email</label>
                    <input type="text" id="studentemail" class="form-control" value="{{selectedStdInfo?.studentemail}}" [(ngModel)]="selectedStdInfo.studentemail" name="selectedStdInfo.studentemail">
                    <!-- <p>{{ selectedStdInfo?.studentemail }}</p> -->
                  </div>
                  <div class="col-lg-4">
                    <label class="form-label fw-bold">Mobile</label>
                    <input type="text" id="studentmobilenumber" class="form-control" value="{{selectedStdInfo?.studentmobilenumber}}" [(ngModel)]="selectedStdInfo.studentmobilenumber" name="selectedStdInfo.studentmobilenumber">
                    <!-- <p>{{ selectedStdInfo?.studentmobilenumber }}</p> -->
                  </div>
                  <div class="col-lg-4">
                    <label class="form-label fw-bold">Whatsapp Number</label>
                    <input type="text" id="studentwhatsappnumber" class="form-control" value="{{ selectedStdInfo?.studentwhatsappnumber  }}" [(ngModel)]="selectedStdInfo.studentwhatsappnumber" name="selectedStdInfo.studentwhatsappnumber">
                    <!-- <p>{{ selectedStdInfo?.studentwhatsappnumber }}</p> -->
                  </div>
                  <div class="col-lg-4">
                    <label class="form-label fw-bold">Gender</label>
                    <input type="text" id="gender" class="form-control" value="{{ selectedStdInfo?.gender  }}" [(ngModel)]="selectedStdInfo.gender" name="selectedStdInfo.gender">

                    <!-- <p>{{ selectedStdInfo?.gender }}</p> -->
                  </div>
                </div>
              </div>
              <div class="p-4 mb-4">
                <h6 class="carda-title text-success mb-3">
                  <i class="bi bi-book"></i> Educational Details
                </h6>
                <hr  />
                <div class="row g-3">
                  <div class="col-md-4">
                    <label class="form-label fw-bold">Ssc Board</label>
                    <input type="text" id="sscboard" class="form-control" value="{{ selectedStdInfo?.sscboard  }}" [(ngModel)]="selectedStdInfo.sscboard" name="selectedStdInfo.sscboard">
                    <label class="form-label fw-bold">Ssc HallTicket Number</label>
                    <input type="text" id="sschallticketnumber" class="form-control" value="{{ selectedStdInfo?.sschallticketnumber  }}" [(ngModel)]="selectedStdInfo.sschallticketnumber" name="selectedStdInfo.sschallticketnumber">
                    
                      
                  </div>
                  <div class="col-md-4">
                    <label class="form-label fw-bold">Ssc Grade</label>
                    <input type="text" id="sscgpa" class="form-control" value="{{selectedStdInfo?.sscgpa}}" [(ngModel)]="selectedStdInfo.sscgpa" name="selectedStdInfo.sscgpa">
                    <label class="form-label fw-bold">Ssc PassedOut Year</label>
                    <input type="text" id="sscyearofpass" class="form-control" value="{{ selectedStdInfo?.sscyearofpass  }}" [(ngModel)]="selectedStdInfo.sscyearofpass" name="selectedStdInfo.sscyearofpass">

                  </div>
  
                  <div class="col-md-4">
                    <label class="form-label fw-bold">Inter Board</label>
                    <input type="text" id="interboard" class="form-control" value="{{ selectedStdInfo?.interboard  }}" [(ngModel)]="selectedStdInfo.interboard" name="interboard">
                    <label class="form-label fw-bold">Inter HallTicket Number</label>
                    <input type="text" id="interhallticketnumber" class="form-control" value="{{ selectedStdInfo?.interhallticketnumber  }}" [(ngModel)]="selectedStdInfo.interhallticketnumber" name="selectedStdInfo.interhallticketnumber">

                     
                      
                  </div>
                  <div class="col-md-4">
                    <label class="form-label fw-bold">Inter Percentage</label>
                    <input type="text" id="interpercentage" class="form-control" value="{{ selectedStdInfo?.interpercentage  }}" [(ngModel)]="selectedStdInfo.interpercentage" name="selectedStdInfo.interpercentage">

                    <label class="form-label fw-bold">Inter PassedOut Year</label>
                    <input type="text" id="interyearofpass" class="form-control" value="{{ selectedStdInfo?.interyearofpass  }}" [(ngModel)]="selectedStdInfo.interyearofpass" name="selectedStdInfo.interyearofpass">

                  </div>
                </div>
              </div>
              <div class="p-4 mb-4" *ngIf="selectedStdInfo?.paymentinfo.length > 0">
                <h6 class="carda-title text-danger mb-3">
                  <i class="bi bi-currency-rupee"></i> Payment Details
                </h6>
                <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th>Paid Date</th>
                        <th>Receipt Number</th>
                        <th>Paid Amount</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let x of selectedStdInfo?.paymentinfo; let i = index">
                        <td>
                          <input
                            type="text"
                            id="cheque_date_{{i}}"
                            class="form-control"
                            [(ngModel)]="x.cheque_date"
                            name="cheque_date_{{i}}"
                            placeholder="Enter cheque date"
                          />
                        </td>
                        <td>
                          <input
                            type="text"
                            id="reciept_no_{{i}}"
                            class="form-control"
                            [(ngModel)]="x.reciept_no"
                            name="reciept_no_{{i}}"
                            placeholder="Enter receipt number"
                          />
                        </td>
                        <td>
                          <input
                            type="text"
                            id="amount_paid_{{i}}"
                            class="form-control"
                            [(ngModel)]="x.amount_paid"
                            name="amount_paid_{{i}}"
                            placeholder="Enter paid amount"
                          />
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  
             
              </div>
              <div class="p-4 mb-4">
                <h6 class="carda-title text-warning mb-3">
                  <i class="bi bi-person-fill"></i> Personal Details
                </h6>
                <hr  />
                <div class="row g-3">
                  <div class="col-md-4">
                    <label class="form-label fw-bold">Religion</label>
                    <input type="text" id="religion" class="form-control" value="{{ selectedStdInfo?.religion  }}" [(ngModel)]="selectedStdInfo.religion" name="selectedStdInfo.religion">

                    <label class="form-label fw-bold">Reservation Category</label>
                    <input type="text" id="reservation" class="form-control" value="{{ selectedStdInfo?.reservation  }}" [(ngModel)]="selectedStdInfo.reservation" name="selectedStdInfo.reservation">

                     
                  </div>
                  <div class="col-md-4">
                    <label class="form-label fw-bold">Aadhar No</label>
                    <input type="text" id="studentaadhaarnumber" class="form-control" value="{{ selectedStdInfo?.studentaadhaarnumber  }}" [(ngModel)]="selectedStdInfo.studentaadhaarnumber" name="selectedStdInfo.studentaadhaarnumber">

                    <label class="form-label fw-bold">Moles</label>
                  <ul>
                    <li><input type="text" id="mole1" class="form-control" value="{{ selectedStdInfo?.mole1  }}" [(ngModel)]="selectedStdInfo.mole1" name="selectedStdInfo.mole1"></li>
                    <li><input type="text" id="mole2" class="form-control" value="{{ selectedStdInfo?.mole2  }}" [(ngModel)]="selectedStdInfo.mole2" name="selectedStdInfo.mole2"></li>
                  </ul>
                     
                  </div>
                    
                  <div class="col-md-4">
                      
                    <label class="form-label fw-bold">Father Name</label>
                    <input type="text" id="fathername" class="form-control" value="{{ selectedStdInfo?.fathername  }}" [(ngModel)]="selectedStdInfo.fathername" name="selectedStdInfo.fathername">
                    <label class="form-label fw-bold">Father Number</label>
                    <input type="text" id="fathermobilenumber" class="form-control" value="{{ selectedStdInfo?.fathermobilenumber  }}" [(ngModel)]="selectedStdInfo.fathermobilenumber" name="selectedStdInfo.fathermobilenumber">

                  </div>
                  <div class="col-md-4">
                      
                    <label class="form-label fw-bold">Mother Name</label>
                    <input type="text" id="mothername" class="form-control" value="{{ selectedStdInfo?.mothername  }}" [(ngModel)]="selectedStdInfo.mothername" name="selectedStdInfo.mothername">

                    <label class="form-label fw-bold">Mother Number</label>
                    <input type="text" id="mothermobilenumber" class="form-control" value="{{ selectedStdInfo?.mothermobilenumber  }}" [(ngModel)]="selectedStdInfo.mothermobilenumber" name="selectedStdInfo.mothermobilenumber">

                     
                  </div>
                  <div class="col-md-4">
                    <label class="form-label fw-bold">Physically Challenged</label>
                    <input type="text" id="physicallychallenged" class="form-control" value="{{ selectedStdInfo?.physicallychallenged  }}" [(ngModel)]="selectedStdInfo.physicallychallenged" name="selectedStdInfo.physicallychallenged">

                    <label class="form-label fw-bold">Student Address</label>
                    <input type="text" id="studentaddress" class="form-control" value="{{ selectedStdInfo?.studentaddress  }}" [(ngModel)]="selectedStdInfo.studentaddress" name="selectedStdInfo.studentaddress">

                     
                  </div>
                </div>
              </div>
             
  
              <div class="p-4 mb-4">
                <h6 class="carda-title text-info mb-3">
                  <i class="bi bi-file-earmark-text"></i> Uploaded Certificates
                </h6>
                <hr />
                <div class="row g-3">
                  <div class="col-md-3 col-6" *ngFor="let x of selectedStdInfo?.certificates; let i = index">
                    <div class="d-flex justify-content-between align-items-center">
                      <label class="form-label fw-bold">
                        <a 
                          [href]="x.fileurl?.changingThisBreaksApplicationSecurity || x.fileurl" 
                          target="_blank" 
                          class="text-decoration-none text-dark">
                          <i class="bi bi-cloud-arrow-down me-1 fs-5"></i>{{ x?.docType }}
                        </a>
                      </label>
                      <i 
                        style="font-size: 20px;"
                        class="bi bi-pencil-square text-primary" 
                        (click)="editCertificate(i, x.docType)">
                        
                    </i>
                    </div>
                    <div class="certificate-preview border rounded p-2" style="height: 200px;">
                      <span *ngIf="x?.mimetype === 'application/pdf'">
                        <iframe 
                          [src]="pdf_url_sanitize(x.fileurl)" 
                          class="w-100" 
                          height="180px" 
                          frameborder="0">
                        </iframe>
                      </span>
                      <span *ngIf="x?.mimetype !== 'application/pdf'">
                        <a 
                          [href]="x.fileurl?.changingThisBreaksApplicationSecurity || x.fileurl" 
                          target="_blank" 
                          class="text-decoration-none">
                          <img 
                            [src]="x.fileurl" 
                            class="img-fluid rounded shadow" 
                            style="width: 100px;" 
                            alt="Certificate">
                        </a>
                      </span>
                    </div>
                    <div *ngIf="editingIndex === i" class="mt-3">
                      <input 
                        type="file" 
                        class="form-control" 
                        (change)="onFileUpload($event, i, x.docType)">
                      <button 
                        class="btn btn-sm btn-success mt-2 me-1" 
                        (click)="saveCertificate(i,x.docType)">
                        Update
                      </button>
                      <button 
                        class="btn btn-sm btn-secondary mt-2" 
                        (click)="cancelEdit()">
                        Cancel
                      </button>
                    </div>
                  </div>
                </div>
              </div>
             <div class="col-md-12 text-center mb-2">
                <button class="btn btn-primary" (click)="SubmitEditedData(selectedStdInfo.suc)">Submit</button>
             </div>
  
            </div>
          </div>
        </section>
</main>